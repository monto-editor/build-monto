sudo: false

script: |
  jdk_switcher oraclejdk7
  mvn compile
  jdk_switcher oraclejdk8
  mvn test
  # build (always) and deploy (master commits only)
  if [[ "$TRAVIS_BRANCH" = "master" && "$TRAVIS_PULL_REQUEST" = false ]]; then
    mvn deploy
  else
    # otherwise, just run test suite
    mvn verify
  fi
  
cache:
  directories:
    - '$HOME/.m2/repository'
